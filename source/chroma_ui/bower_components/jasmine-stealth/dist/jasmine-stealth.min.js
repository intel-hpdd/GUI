/* jasmine-stealth - 0.0.15
 * Makes Jasmine spies a bit more robust
 * https://github.com/searls/jasmine-stealth
 */
(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(){var a,c,d,e,f,g,h;return d=this,h=function(a){return{each:function(b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(b(c));return f},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(a)},isString:function(){return"[object String]"===Object.prototype.toString.call(a)}}},d.spyOnConstructor=function(a,b,d){var e,f;return null==d&&(d=[]),h(d).isString()&&(d=[d]),f={constructor:jasmine.createSpy(""+b+"'s constructor")},e=function(){function a(){f.constructor.apply(this,arguments)}return a}(),h(d).each(function(a){return f[a]=jasmine.createSpy(""+b+"#"+a),e.prototype[a]=function(){return f[a].apply(this,arguments)}}),c(a,b,e),f},f=[],afterEach(function(){return h(f).each(function(a){return a()}),f=[]}),c=function(a,b,c){var d;return d=a[b],a[b]=c,f.push(function(){return a[b]=d})},d.stubFor=d.spyOn,jasmine.createStub=jasmine.createSpy,jasmine.createStubObj=function(a,b){var c,d,e;if(b.constructor===Array)return jasmine.createSpyObj(a,b);d={};for(c in b)e=b[c],d[c]=jasmine.createSpy(a+"."+c),h(e).isFunction()?d[c].andCallFake(e):d[c].andReturn(e);return d},g=function(a){var b,c;return b=function(a,b,c){switch(a.type){case"args":return jasmine.getEnv().equals_(a.ifThis,jasmine.util.argsToArray(b));case"context":return jasmine.getEnv().equals_(a.ifThis,c)}},c=a.plan,a.andCallFake(function(){var d,e;for(d=0;d<a._stealth_stubbings.length;){if(e=a._stealth_stubbings[d],b(e,arguments,this))return"callFake"===e.satisfaction?e.thenThat.apply(e,arguments):e.thenThat;d++}return c.apply(a,arguments)})},jasmine.Spy.prototype.whenContext=function(a){var b;return b=this,b._stealth_stubbings||(b._stealth_stubbings=[]),g(b),e(b,"context",a)},jasmine.Spy.prototype.when=function(){var a,b;return b=this,a=jasmine.util.argsToArray(arguments),b._stealth_stubbings||(b._stealth_stubbings=[]),g(b),e(b,"args",a)},e=function(a,b,c){var d;return d=function(d){return function(e){return a._stealth_stubbings.push({type:b,ifThis:c,satisfaction:d,thenThat:e}),a}},{thenReturn:d("return"),thenCallFake:d("callFake")}},jasmine.Spy.prototype.mostRecentCallThat=function(a,b){var c;for(c=this.calls.length-1;c>=0;){if(a.call(b||this,this.calls[c])===!0)return this.calls[c];c--}},jasmine.Matchers.ArgThat=function(a){function c(a){this.matcher=a}return b(c,a),c.prototype.jasmineMatches=function(a){return this.matcher(a)},c}(jasmine.Matchers.Any),jasmine.Matchers.ArgThat.prototype.matches=jasmine.Matchers.ArgThat.prototype.jasmineMatches,jasmine.argThat=function(a){return new jasmine.Matchers.ArgThat(a)},jasmine.Matchers.Capture=function(a){function c(a){this.captor=a}return b(c,a),c.prototype.jasmineMatches=function(a){return this.captor.value=a,!0},c}(jasmine.Matchers.Any),jasmine.Matchers.Capture.prototype.matches=jasmine.Matchers.Capture.prototype.jasmineMatches,a=function(){function a(){}return a.prototype.capture=function(){return new jasmine.Matchers.Capture(this)},a}(),jasmine.captor=function(){return new a}}()}).call(this);